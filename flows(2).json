[{"id":"9e00929392a21717","type":"function","z":"ddc65d6b242df276","name":"type","func":"msg.payload = `ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":430,"wires":[["d9e1acc70a8b82bf"]]},{"id":"e8b6e633cac3abf9","type":"serial out","z":"ddc65d6b242df276","name":"","serial":"0c7db013771fece1","x":1640,"y":420,"wires":[]},{"id":"bd754915ceba1c3f","type":"inject","z":"ddc65d6b242df276","name":"Input data","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"0.5","crontab":"","once":false,"onceDelay":0.1,"topic":"","payloadType":"date","x":195,"y":420,"wires":[["380d3f8a1aa9ec35"]],"icon":"font-awesome/fa-refresh","l":false},{"id":"d9e1acc70a8b82bf","type":"function","z":"ddc65d6b242df276","name":"no","func":"msg.payload += `,sht10`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":430,"wires":[["8c8df20310edc8cc"]]},{"id":"8c8df20310edc8cc","type":"function","z":"ddc65d6b242df276","name":"val","func":"msg.payload += `,${(Math.random()*14).toFixed(2)}`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":430,"wires":[["0111dad09e8f56f2"]]},{"id":"0111dad09e8f56f2","type":"function","z":"ddc65d6b242df276","name":"unit","func":"msg.payload += `,ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":430,"wires":[["037a7b9c236fbc2b"]]},{"id":"037a7b9c236fbc2b","type":"function","z":"ddc65d6b242df276","name":"min","func":"msg.payload += `,0`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1190,"y":430,"wires":[["8145e02a743e2a3c"]]},{"id":"8145e02a743e2a3c","type":"function","z":"ddc65d6b242df276","name":"max","func":"msg.payload += `,14`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1310,"y":430,"wires":[["922a0180d0542b36"]]},{"id":"922a0180d0542b36","type":"function","z":"ddc65d6b242df276","name":"#","func":"msg.payload += `#`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":430,"wires":[["e8b6e633cac3abf9","5fab08fbbbaed3f5"]]},{"id":"9d626d27def8ba82","type":"function","z":"ddc65d6b242df276","name":"type","func":"msg.payload = `ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":714,"y":531,"wires":[["2ea1cff5e7209240"]]},{"id":"2ea1cff5e7209240","type":"function","z":"ddc65d6b242df276","name":"no","func":"msg.payload += `,sht101`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":834,"y":531,"wires":[["a5a7190693a40c52"]]},{"id":"a5a7190693a40c52","type":"function","z":"ddc65d6b242df276","name":"val","func":"msg.payload += `,${(Math.random()*14).toFixed(2)}`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":954,"y":531,"wires":[["991e737abb766813"]]},{"id":"991e737abb766813","type":"function","z":"ddc65d6b242df276","name":"unit","func":"msg.payload += `,ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1074,"y":531,"wires":[["0a0176caa1cd107a"]]},{"id":"0a0176caa1cd107a","type":"function","z":"ddc65d6b242df276","name":"min","func":"msg.payload += `,0`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1194,"y":531,"wires":[["7c0c2d1b579a9c4b"]]},{"id":"7c0c2d1b579a9c4b","type":"function","z":"ddc65d6b242df276","name":"max","func":"msg.payload += `,14`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1314,"y":531,"wires":[["922a0180d0542b36"]]},{"id":"a238778060ad8bd1","type":"function","z":"ddc65d6b242df276","name":"type","func":"msg.payload = `ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":718,"y":602,"wires":[["86506933109be600"]]},{"id":"86506933109be600","type":"function","z":"ddc65d6b242df276","name":"no","func":"msg.payload += `,sht444`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":838,"y":602,"wires":[["5bd31fd926462639"]]},{"id":"5bd31fd926462639","type":"function","z":"ddc65d6b242df276","name":"val","func":"msg.payload += `,${(Math.random()*14).toFixed(2)}`\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":958,"y":602,"wires":[["8d6cd57ec8b8939b"]]},{"id":"8d6cd57ec8b8939b","type":"function","z":"ddc65d6b242df276","name":"unit","func":"msg.payload += `,ph`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1078,"y":602,"wires":[["8ea01430fd448226"]]},{"id":"8ea01430fd448226","type":"function","z":"ddc65d6b242df276","name":"min","func":"msg.payload += `,0`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1198,"y":602,"wires":[["d257d2788318fbaa"]]},{"id":"d257d2788318fbaa","type":"function","z":"ddc65d6b242df276","name":"max","func":"msg.payload += `,14`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1318,"y":602,"wires":[["922a0180d0542b36"]]},{"id":"5fab08fbbbaed3f5","type":"debug","z":"ddc65d6b242df276","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1540,"y":590,"wires":[]},{"id":"5157bac22405d7f0","type":"function","z":"ddc65d6b242df276","name":"@","func":"msg.payload += `@`\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":400,"wires":[["9e00929392a21717","a238778060ad8bd1","9d626d27def8ba82"]]},{"id":"1ece6fec1a1d9930","type":"group","z":"ddc65d6b242df276","name":"‚ùåƒë√≥ng ‚úîÔ∏èm·ªü lu·ªìng d·ªØ li·ªáu","style":{"fill":"#7fb7df","label":false,"stroke":"#7fb7df","stroke-opacity":"0.3","fill-opacity":"0.25"},"nodes":["380d3f8a1aa9ec35","db42785dfd6fb733","34c13e9ed7d79e8d"],"x":234,"y":339,"w":182,"h":122,"info":"`Input`\nƒê·∫ßu v√†o data, c√≥ b√°o tr·∫°ng th√°i input\n\n`Output` ƒê·∫ßu ra data, c√≥ b√°o tr·∫°ng th√°i lu·ªìng\n\n`Switch` Chuy·ªÉn lu·ªìng **_ƒê√≥ng_** <=> **_M·ªü_** t·∫°i ƒë·∫ßu ra c·ªßa `Output`"},{"id":"380d3f8a1aa9ec35","type":"function","z":"ddc65d6b242df276","g":"1ece6fec1a1d9930","name":"Input data","func":"global.set(`${node.id}_start`, new Date().getTime())\nglobal.set(node.id, global.get(node.id)+1 || 0) // ƒë·∫øm\n\n\nlet count = global.get(node.id)\n\nlet str=``\nfor(let i=0; i<count; i++){\n    //str+='üîµ'\n    str+='‚û§'\n}\nnode.status({\n    text:str\n})\n\nif(global.get(node.id)>2){\n    global.set(node.id, 0)\n}\n\n\nsetTimeout((()=>{\n    if((new Date().getTime() - global.get(`${node.id}_start`))>3000){\n        node.status({text:\"No input\"})\n    }\n}), 3000);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is started.\nnode.status({text:\"No input\"})","finalize":"// Code added here will be run when the\n// node is being stopped or re-deployed.\n// if(myVar){\n//     clearTimeout(myVar);\n// }\n\n\n\n\n\n","libs":[],"x":275,"y":420,"wires":[["db42785dfd6fb733"]],"inputLabels":["Input"],"icon":"font-awesome/fa-sign-in","l":false,"info":"ghjghj"},{"id":"db42785dfd6fb733","type":"function","z":"ddc65d6b242df276","g":"1ece6fec1a1d9930","name":"Out","func":"global.set(node.id, global.get(node.id) || 0) // Global tr·∫°ng th√°i node\nif(msg.datdp_control){ // Nh·∫≠n l·ªánh switch\n    global.set(node.id, 1 - global.get(node.id)) // ƒê·∫£o trang th√°i\n    // Hi·ªán status\n    if(global.get(node.id)){node.status({text:\"‚úîÔ∏è\"})}\n    else {node.status({text:\"‚ùå\"})}\n} else {\n    if(global.get(node.id)){\n        node.status({text:\"‚úîÔ∏è\"})\n        return msg;\n    }\n    else {node.status({text:\"‚ùå\"})}\n}\n","outputs":1,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is started.\nif(global.get(node.id)){node.status({text:\"‚úîÔ∏è\"})}\n    else {node.status({text:\"‚ùå\"})}","finalize":"","libs":[],"x":375,"y":420,"wires":[["5157bac22405d7f0"]],"outputLabels":["Output"],"icon":"font-awesome/fa-sign-out","l":false,"info":"D√É¬πng √Ñ‚Äò√°¬ª∆í ch√°¬∫¬∑n ho√°¬∫¬∑c m√°¬ª≈∏ lu√°¬ª‚Äúng\n√Ñ¬êi√°¬ª¬Åu khi√°¬ª∆ín b√°¬∫¬±ng node **inject**\n> msg.datdp_control = toggle"},{"id":"34c13e9ed7d79e8d","type":"inject","z":"ddc65d6b242df276","g":"1ece6fec1a1d9930","name":"Switch","props":[{"p":"datdp_control","v":"toggle","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":"","topic":"","x":330,"y":380,"wires":[["db42785dfd6fb733"]]},{"id":"0c7db013771fece1","type":"serial-port","serialport":"COM4","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"@","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"#","bin":"false","out":"char","addchar":"","responsetimeout":"10000"}]